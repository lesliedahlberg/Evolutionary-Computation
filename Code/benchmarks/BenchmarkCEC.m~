clc

f_names = {'f1' 'f2' 'f3' 'f4' 'f5' 'f6' 'f7' 'f8' 'f9' 'f10'};
a_names = { 'DE' 'PSO' 'EDA_FGDA'};
%functions = [1 2 3 4 5 6 7 8 9 10];
%repeat = 30;
%dimensions = [10 30 50];
%algorithms = {@DE @PSO @EDA_FGDA};
%generations = [667 1200 1429];
%populations = [150 250 350];


functions = [1 2 3];
repeat = 2;
dimensions = [2 10 30];
algorithms = {@DE @PSO @EDA_FGDA};
generations = [10 20 30];
populations = [50 65 85];

functionsSize = size(functions,2);
dimensionsSize = size(dimensions,2);
algorithmsSize = size(algorithms,2);

for d=1:dimensionsSize
    data_mean = ones(functionsSize,algorithmsSize);
    data_dev = ones(functionsSize,algorithmsSize);
    for a=1:algorithmsSize
        for f=1:functionsSize
            [correct, upper, lower, objectiveValue, o, A, M, aa, alpha, b] = loadFunctionInfo(functions(f), dimensions(d));
            eval = @(x)calculateFitness(functions(f), x, o, A, M, aa, alpha, b);
            mins = zeros(1, counts);
            for r=1:repeat
                [success, iterations, minimum, value] = algorithms{a}(eval, dimensions(d), lower, upper, generations(d), populations(d), objectiveValue);
                mins(r) = value;
            end
            data_mean(f,a) = mean(mins);
            data_dev(f,a) = std(mins);
        end
    end
    disp(strcat('Algorithm ',));
    m = table(data_mean(:,1), data_mean(:,2), data_mean(:,3), 'RowNames', f_names(1:functionsSize), 'VariableNames', a_names(1:algorithmsSize))
    d = table(data_dev(:,1), data_dev(:,2), data_dev(:,3), 'RowNames',  f_names(1:functionsSize), 'VariableNames', a_names(1:algorithmsSize))
    writetable(m,strcat('math_mean_dim', num2str(dim), '.xlsx'));
    writetable(d,strcat('math_dev_dim', num2str(dim), '.xlsx'));
end